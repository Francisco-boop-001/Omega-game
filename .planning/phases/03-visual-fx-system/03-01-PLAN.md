---
phase: 03-visual-fx-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - crates/omega-bevy/src/simulation/particles.rs
  - crates/omega-bevy/src/simulation/mod.rs
autonomous: true

must_haves:
  truths:
    - "Particle component stores logical 3D position, velocity, and age"
    - "VisualCascade component defines glyph morphing and color gradients"
    - "A character texture atlas can be used for rendering ASCII particles"
  artifacts:
    - path: "crates/omega-bevy/src/simulation/particles.rs"
      provides: "Particle and VisualCascade components"
---

<objective>
Establish the foundational ECS components for the 'High-Fidelity ASCII' particle system.

Output: Particle and VisualCascade components in omega-bevy.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Define Particle and VisualCascade components</name>
  <files>
    crates/omega-bevy/src/simulation/particles.rs
    crates/omega-bevy/src/simulation/mod.rs
  </files>
  <action>
Create `crates/omega-bevy/src/simulation/particles.rs`:
- Define `ParticleKind`: `Fire`, `Smoke`, `Steam`, `Debris`, `Gust`.
- Define `Particle` component:
  ```rust
  #[derive(Component)]
  pub struct Particle {
      pub logical_pos: Vec3,
      pub velocity: Vec3,
      pub age: f32,
      pub max_age: f32,
      pub weight: f32,
      pub kind: ParticleKind,
  }
  ```
- Define `VisualCascade` component:
  ```rust
  #[derive(Component)]
  pub struct VisualCascade {
      pub glyphs: Vec<char>, // e.g. ['@', '*', '.']
      pub colors: Vec<Color>, // Color gradient
      pub rotate: bool,
      pub initial_scale: f32,
  }
  ```
- Register `particles` module in `mod.rs`.
  </action>
</task>

</tasks>

<verification>
- `cargo check -p omega-bevy` passes
</verification>
